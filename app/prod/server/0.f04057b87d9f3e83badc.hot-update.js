exports.id=0,exports.modules={"./src/server/server.js":function(e,t,o){"use strict";o.r(t);var s=o("../build/contracts/FlightSuretyApp.json"),a=o("../build/contracts/FlightSuretyData.json"),r=o("./src/server/config.json"),c=o("web3"),n=o.n(c),l=o("express"),i=o.n(l);let d=r.localhost,u=new n.a(new n.a.providers.WebsocketProvider(d.url.replace("http","ws"))),h=new u.eth.Contract(s.abi,d.appAddress),g=new u.eth.Contract(a.abi,d.dataAddress);const p=[];(async()=>{const e=await u.eth.getAccounts(),t=e.slice(e.length/2);u.eth.defaultAccount=e[0];const{amIAuthorized:o,registerOracle:s,getMyIndexes:a,REGISTRATION_FEE:r}=h.methods,{authorizeContract:c}=g.methods,n=await o().call({from:e[0]});await u.eth.net.getId();n||(console.log("App contract is not authorized. Calling authorize contract"),await c(d.appAddress).send({from:e[0]}));const l=await r().call();t.forEach(async e=>{await s().send({from:e,value:l,gas:3e6});const t=await a().call({from:e});p.push({acct:e,indexes:t})}),h.events.OracleRegistered({fromBlock:0},(function(e,t){e&&console.log(e),console.log(t)}))})(),h.events.OracleRequest({fromBlock:0},(function(e,t){e&&console.log(e),console.log(t)}));const f=i()();f.get("/api",(e,t)=>{t.send({message:"An API for use with your Dapp!"})}),t.default=f}};